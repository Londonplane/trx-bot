# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 项目概述

这是一个TRON能量助手Telegram机器人项目，旨在帮助用户租用TRON能量、购买能量套餐和管理能量相关交易。项目目前处于设计/规格阶段，包含详细的机器人界面和功能文档。

## 项目结构与架构

项目包含详细的中文规格文档，描述了Telegram机器人的以下核心组件：

### 核心功能模块
- **闪租 (Buy Energy)**: TRON能量快速租赁，支持时长和数量选择
- **笔数套餐 (Packages)**: 交易次数套餐
- **能量计算器 (Calculator)**: 能量计算工具
- **余额充值 (Top Up)**: 账户余额充值功能
- **能量代付 (Paymaster)**: 代他人支付能量费用
- **行情 (Market Price)**: 实时市场价格

### 用户界面设计
机器人采用双界面设计方案：
- **内联按钮**: 用于需要立即参数选择的动作导向功能
- **回复键盘**: 用于全局导航和账户管理功能

### 关键架构模式
- **单消息编辑**: 所有参数选择和状态更新都在同一条消息内完成以保持上下文
- **状态管理**: 服务器端会话状态跟踪用户选择和偏好
- **实时定价**: 基于能量数量和时长的动态成本计算
- **地址管理**: 用户钱包地址绑定和选择系统

## 开发环境

当前项目为规划阶段，包含：
- 用户界面规格 (主页面信息卡片布局方案.md)
- 详细交互流程 (闪租页（Buy Energy）交互与开发规格文档.md)
- 功能模块定义 (功能模块.md)

文档使用中文编写，遵循Telegram Bot API模式，使用内联键盘和消息编辑来提供无缝用户体验。

## 实现要点

在开发此项目时需要注意：
- 项目专注于TRON区块链能量租赁服务
- 所有用户交互应通过消息编辑而非发送新消息来保持上下文
- 机器人需要与TRON区块链集成进行地址验证和余额检查
- 定价计算需要实时市场数据集成
- 状态管理对于维护用户会话数据至关重要

## 技术栈

- **Python 3.8+**: 主要开发语言
- **python-telegram-bot**: Telegram Bot API库，用于处理消息、回调和状态管理
- **内存状态管理**: 使用字典存储用户会话状态（后期可升级为Redis）

## 开发命令

由于项目使用Python，建议的开发流程：

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境 (Windows)
venv\Scripts\activate

# 安装依赖
pip install python-telegram-bot

# 运行机器人
python main.py
```

## 关键技术要求

- Telegram Bot API集成及内联键盘实现
- TRON区块链集成用于地址验证和能量转账
- 实时定价API用于能量成本计算
- 用户会话状态管理
- 多语言支持（中文为主）
- 支付处理集成
- 地址验证和管理功能