# TRON余额查询机器人 - 快速启动指南

## 功能介绍
这是一个Telegram机器人，可以查询TRON钱包地址的：
- **TRX余额** - 显示钱包中的TRX数量
- **Energy余额** - 显示可用能量和使用情况  
- **Bandwidth余额** - 显示可用带宽和使用情况

## 准备工作

### 1. 创建Telegram机器人
1. 在Telegram中找到 @BotFather
2. 发送 `/newbot` 命令
3. 按提示设置机器人名称和用户名
4. 获取Bot Token（类似：`1234567890:ABCdefGHIjklMNOpqrSTUvwxyz`）

### 2. 安装依赖
```bash
# 激活虚拟环境 (Windows)
venv\Scripts\activate

# 安装依赖包
pip install -r requirements.txt
```

### 3. 配置环境变量
```bash
# 复制环境变量模板
copy .env.example .env

# 编辑 .env 文件，填入你的配置
```

**.env 文件内容示例：**
```env
# Telegram Bot Token (必填)
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrSTUvwxyz

# TRON API配置
TRON_API_URL=https://api.trongrid.io

# 可选：TRON API Key (提高调用频率限制)
# TRON_API_KEY=your_api_key_here

# 日志级别
LOG_LEVEL=INFO
```

## 启动机器人

### 方式一：直接启动
```bash
python main.py
```

### 方式二：测试API功能
```bash
# 测试TRON API连接
python tron_api.py
```

## 使用方法

### 1. 启动对话
- 在Telegram中找到你的机器人
- 发送 `/start` 命令

### 2. 查询余额
1. 点击 **"💳 Address Balance（余额查询）"** 按钮
2. 发送TRON钱包地址（格式：`TRX9Uhjn948ynC8J2LRRHVpbdYT6GKRTLz`）
3. 等待查询结果

### 3. 查询结果说明
机器人会显示以下信息：
- **TRX余额**：钱包中的TRX数量
- **能量(Energy)**：
  - 可用数量
  - 总限制
  - 已使用数量和使用率
- **带宽(Bandwidth)**：
  - 可用数量  
  - 总限制
  - 已使用数量和使用率
- **免费带宽**：每日免费额度使用情况

## 故障排除

### 常见问题

#### 1. "请设置TELEGRAM_BOT_TOKEN环境变量"
**原因**: 未正确配置Bot Token  
**解决**: 检查 `.env` 文件是否存在且包含正确的Token

#### 2. "地址格式无效"
**原因**: 输入的TRON地址格式不正确  
**解决**: 确保地址以'T'开头，长度为34个字符

#### 3. "查询失败 - 地址不存在或未激活"
**原因**: 地址从未接收过任何交易  
**解决**: 使用已激活的地址（至少接收过一次TRX转账）

#### 4. "网络连接问题"
**原因**: 无法连接到TRON API服务  
**解决**: 检查网络连接，稍后重试

### 调试模式
如需查看详细日志，修改 `.env` 文件：
```env
LOG_LEVEL=DEBUG
```

### 测试用地址
可以使用这些公开地址进行测试：
```
TLPpXqEnbRvKuE7CyxSvWtSyJhJnBJKNDj  # Binance热钱包
TQjaZ9FD473QBTdUzMLmSyTkkSJoxXJ8Zx   # Huobi交易所
```

## API说明

### 使用的TRON API接口
- **getAccount**: 获取账户基本信息和TRX余额
- **getAccountResource**: 获取Energy和Bandwidth资源信息

### API限制
- 免费API：每秒15次请求
- 如需更高频率，可申请API Key

## 安全提醒
1. ✅ 机器人只执行**查询操作**，不涉及转账
2. ✅ 不会存储用户的地址信息  
3. ✅ 不需要用户提供私钥或助记词
4. ⚠️ 不要将Bot Token公开或提交到代码仓库

## 支持的功能
- ✅ TRX余额查询
- ✅ Energy(能量)余额查询
- ✅ Bandwidth(带宽)余额查询
- ✅ 地址格式验证
- ✅ 错误处理和用户提示
- ✅ 友好的界面展示

## 扩展功能
后续可以添加的功能：
- TRC-20代币余额查询（如USDT）
- 历史交易查询
- 价格信息显示
- 批量地址查询
- 定时余额监控

---

有问题请检查日志输出或查阅 `TRON_API重要接口参考文档.md` 文件。