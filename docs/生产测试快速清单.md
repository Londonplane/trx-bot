# ğŸš€ TRONèƒ½é‡åŠ©æ‰‹ç”Ÿäº§æµ‹è¯•å¿«é€Ÿæ¸…å•

## ğŸ“‹ æµ‹è¯•å‰å‡†å¤‡æ£€æŸ¥

### æœåŠ¡å™¨å‡†å¤‡
- [ ] VPSå·²è´­ä¹° (2æ ¸4G+, Ubuntu 20.04+)
- [ ] åŸŸåå·²é…ç½® (å¯é€‰)
- [ ] SSHè®¿é—®æ­£å¸¸
- [ ] é˜²ç«å¢™é…ç½® (å¼€æ”¾8001ç«¯å£)

### èµ„é‡‘å‡†å¤‡ âš ï¸ ä»…ä½¿ç”¨æµ‹è¯•èµ„é‡‘
- [ ] å‡†å¤‡2-3ä¸ªä¾›åº”å•†é’±åŒ…ï¼Œå„100+ TRX
- [ ] å‡†å¤‡æµ‹è¯•ç”¨æˆ·é’±åŒ…åœ°å€
- [ ] è®°å½•æ‰€æœ‰ç§é’¥ (æµ‹è¯•åç«‹å³é”€æ¯)

### é…ç½®æ–‡ä»¶å‡†å¤‡
- [ ] Telegram Bot Token
- [ ] TRON API Key (å¯é€‰)
- [ ] å¼ºéšæœºå¯†é’¥ç”Ÿæˆ

---

## ğŸ”§ é˜¶æ®µ1: æœåŠ¡å™¨éƒ¨ç½² (é¢„è®¡30åˆ†é’Ÿ)

### ä»£ç éƒ¨ç½²
```bash
# 1. è¿æ¥VPS
ssh root@your-vps-ip

# 2. å®‰è£…ä¾èµ–
apt update && apt upgrade -y
apt install -y git python3 python3-pip postgresql postgresql-contrib redis-server

# 3. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/trx-bot.git
cd trx-bot

# 4. é…ç½®ç¯å¢ƒ
cp backend/.env.example backend/.env
nano backend/.env  # å¡«å…¥é…ç½®ä¿¡æ¯
```

### æœåŠ¡å¯åŠ¨
```bash
# 5. å®‰è£…Pythonä¾èµ–
cd backend && pip3 install -r requirements.txt

# 6. å¯åŠ¨æœåŠ¡
chmod +x start_services.sh && ./start_services.sh
```

### âœ… éªŒè¯æ­¥éª¤
```bash
# æµ‹è¯•APIå¥åº·çŠ¶æ€
curl http://localhost:8001/health
# æœŸæœ›: {"status":"healthy","message":"APIæœåŠ¡æ­£å¸¸è¿è¡Œ"}

# æµ‹è¯•æ•°æ®åº“è¿æ¥
curl http://localhost:8001/api/users/12345/balance  
# æœŸæœ›: {"user_id":12345,"balance_trx":"0.000000","balance_usdt":"0.000000"}
```

**éªŒæ”¶æ ‡å‡†**: æ‰€æœ‰APIè°ƒç”¨è¿”å›æ­£ç¡®å“åº” âœ…

---

## ğŸ’³ é˜¶æ®µ2: é’±åŒ…é…ç½® (é¢„è®¡15åˆ†é’Ÿ)

### æ·»åŠ ä¾›åº”å•†é’±åŒ…
```bash
# 1. æ·»åŠ ç¬¬ä¸€ä¸ªé’±åŒ…
curl -X POST http://localhost:8001/api/supplier-wallets/add \
  -H "Content-Type: application/json" \
  -d '{"private_key": "your_64_char_private_key"}'

# 2. éªŒè¯é’±åŒ…æ·»åŠ 
curl http://localhost:8001/api/supplier-wallets/
```

### âœ… éªŒè¯æ­¥éª¤
- [ ] é’±åŒ…åœ°å€æ­£ç¡®æ˜¾ç¤º
- [ ] TRXä½™é¢æ˜¾ç¤ºæ­£ç¡® (åº”è¯¥>50 TRX)
- [ ] Energyä½™é¢æ˜¾ç¤ºæ­£ç¡®
- [ ] é’±åŒ…çŠ¶æ€ä¸º `"is_active": true`

**éªŒæ”¶æ ‡å‡†**: é’±åŒ…ä¿¡æ¯å®Œæ•´å‡†ç¡®ï¼Œä½™é¢>50 TRX âœ…

---

## ğŸ’° é˜¶æ®µ3: ç”¨æˆ·å……å€¼æµ‹è¯• (é¢„è®¡10åˆ†é’Ÿ)

### æ¨¡æ‹Ÿç”¨æˆ·å……å€¼
```bash
# 1. åˆ›å»ºæµ‹è¯•ç”¨æˆ·å……å€¼
curl -X POST http://localhost:8001/api/users/999888/deposit \
  -H "Content-Type: application/json" \
  -d '{
    "tx_hash": "1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
    "amount": 20.0,
    "currency": "TRX"
  }'

# 2. éªŒè¯ç”¨æˆ·ä½™é¢
curl http://localhost:8001/api/users/999888/balance
```

### âœ… éªŒè¯æ­¥éª¤
- [ ] å……å€¼æ¥å£è¿”å› `"success": true`
- [ ] ç”¨æˆ·ä½™é¢æ˜¾ç¤º `"balance_trx": "20.000000"`
- [ ] ä½™é¢å˜åŠ¨æœ‰è®°å½•

**éªŒæ”¶æ ‡å‡†**: ç”¨æˆ·å……å€¼æˆåŠŸï¼Œä½™é¢æ›´æ–°æ­£ç¡® âœ…

---

## ğŸ›’ é˜¶æ®µ4: è®¢å•æµç¨‹æµ‹è¯• (é¢„è®¡20åˆ†é’Ÿ)

### åˆ›å»ºæµ‹è¯•è®¢å•
```bash
# 1. åˆ›å»ºè®¢å•
ORDER_RESPONSE=$(curl -X POST http://localhost:8001/api/orders/ \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": 999888,
    "energy_amount": 32000,
    "duration": "1h",
    "receive_address": "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"
  }')

echo $ORDER_RESPONSE

# 2. æå–è®¢å•IDå¹¶ç›‘æ§çŠ¶æ€
ORDER_ID=$(echo $ORDER_RESPONSE | jq -r '.id')
watch -n 10 "curl -s http://localhost:8001/api/orders/$ORDER_ID | jq .status"
```

### âœ… éªŒè¯æ­¥éª¤
- [ ] è®¢å•åˆ›å»ºæˆåŠŸï¼Œè¿”å›è®¢å•ID
- [ ] è®¢å•çŠ¶æ€ä» `pending` å˜ä¸º `processing`
- [ ] ç”¨æˆ·ä½™é¢è¢«æ­£ç¡®æ‰£å‡ (çº¦0.021 TRX)
- [ ] è®¢å•æœ€ç»ˆçŠ¶æ€ä¸º `completed` (æˆ–è§‚å¯Ÿå¤„ç†è¿‡ç¨‹)

### ğŸ¯ å…³é”®è§‚å¯Ÿç‚¹
```bash
# å¹¶è¡Œç›‘æ§å¤šä¸ªæŒ‡æ ‡
# ç»ˆç«¯1: è®¢å•çŠ¶æ€
watch -n 5 "curl -s http://localhost:8001/api/orders/$ORDER_ID | jq '{status: .status, error: .error_message}'"

# ç»ˆç«¯2: ç”¨æˆ·ä½™é¢  
watch -n 5 "curl -s http://localhost:8001/api/users/999888/balance | jq .balance_trx"

# ç»ˆç«¯3: é’±åŒ…æ± çŠ¶æ€
watch -n 5 "curl -s http://localhost:8001/api/supplier-wallets/ | jq '.[0] | {energy: .energy_available, trx: .trx_balance}'"
```

**éªŒæ”¶æ ‡å‡†**: è®¢å•æˆåŠŸå¤„ç†ï¼Œä½™é¢æ­£ç¡®æ‰£å‡ï¼ŒTRONäº¤æ˜“æ‰§è¡Œ âœ…

---

## ğŸ¤– é˜¶æ®µ5: Telegram Botæµ‹è¯• (é¢„è®¡15åˆ†é’Ÿ)

### BotæœåŠ¡å¯åŠ¨
```bash
# 1. å¯åŠ¨Bot (æ–°ç»ˆç«¯)
cd /root/trx-bot
python3 main.py
```

### ç«¯åˆ°ç«¯æµ‹è¯•æµç¨‹
1. **å¯åŠ¨Bot**: åœ¨Telegramä¸­å‘é€ `/start`
2. **æ·»åŠ é’±åŒ…**: æ·»åŠ æµ‹è¯•æ¥æ”¶åœ°å€
3. **ä½™é¢æŸ¥è¯¢**: ç‚¹å‡» "Address balance" éªŒè¯TRONä½™é¢æŸ¥è¯¢
4. **é—ªç§Ÿé¡µé¢**: é€‰æ‹© "32K Energy, 1h" 
5. **è´¹ç”¨ç¡®è®¤**: éªŒè¯è´¹ç”¨è®¡ç®— (çº¦0.021 TRX)
6. **ä¸‹å•æµ‹è¯•**: ç‚¹å‡» "Buy" æŒ‰é’®
7. **çŠ¶æ€è·Ÿè¸ª**: è§‚å¯Ÿè®¢å•å¤„ç†è¿‡ç¨‹

### âœ… éªŒè¯æ­¥éª¤
- [ ] Botæ­£å¸¸å¯åŠ¨å’Œå“åº”
- [ ] é’±åŒ…åœ°å€éªŒè¯åŠŸèƒ½æ­£å¸¸  
- [ ] ä½™é¢æŸ¥è¯¢æ˜¾ç¤ºçœŸå®æ•°æ®
- [ ] è´¹ç”¨è®¡ç®—å‡†ç¡®
- [ ] ä¸‹å•æµç¨‹å®Œæ•´
- [ ] è®¢å•çŠ¶æ€æ­£ç¡®æ˜¾ç¤º

**éªŒæ”¶æ ‡å‡†**: ç«¯åˆ°ç«¯ç”¨æˆ·æµç¨‹å®Œå…¨æ­£å¸¸ âœ…

---

## âš¡ é˜¶æ®µ6: æ€§èƒ½æµ‹è¯• (é¢„è®¡10åˆ†é’Ÿ)

### åŸºç¡€æ€§èƒ½æµ‹è¯•
```bash
# 1. APIå“åº”æ—¶é—´æµ‹è¯•
time curl -s http://localhost:8001/health

# 2. å¹¶å‘è®¢å•æµ‹è¯• (3ä¸ªå¹¶å‘è®¢å•)
for i in {1..3}; do
  curl -X POST http://localhost:8001/api/orders/ \
    -H "Content-Type: application/json" \
    -d "{\"user_id\": $((999888 + $i)), \"energy_amount\": 16000, \"duration\": \"1h\", \"receive_address\": \"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t\"}" &
done
wait

# 3. ç³»ç»Ÿèµ„æºæ£€æŸ¥
free -h && df -h
```

### âœ… éªŒè¯æ­¥éª¤
- [ ] APIå“åº”æ—¶é—´ < 2ç§’
- [ ] å¹¶å‘è®¢å•æ­£å¸¸å¤„ç†
- [ ] ç³»ç»Ÿèµ„æºä½¿ç”¨æ­£å¸¸ (å†…å­˜<80%, ç£ç›˜<80%)
- [ ] æ— æ˜æ˜¾æ€§èƒ½ç“¶é¢ˆ

**éªŒæ”¶æ ‡å‡†**: ç³»ç»Ÿæ€§èƒ½æ»¡è¶³åŸºæœ¬è¦æ±‚ âœ…

---

## ğŸ”’ é˜¶æ®µ7: å®‰å…¨æ£€æŸ¥ (é¢„è®¡5åˆ†é’Ÿ)

### å®‰å…¨éªŒè¯æµ‹è¯•
```bash
# 1. æ£€æŸ¥ç§é’¥åŠ å¯†å­˜å‚¨
python3 << 'EOF'
from backend.app.models import SupplierWallet
from backend.app.database import SessionLocal

db = SessionLocal()
wallet = db.query(SupplierWallet).first()
if wallet:
    print("Private key encrypted length:", len(wallet.private_key_encrypted))
    print("Private key starts with:", wallet.private_key_encrypted[:20])
else:
    print("No wallet found")
EOF

# 2. æµ‹è¯•APIé”™è¯¯å¤„ç†
curl -X POST http://localhost:8001/api/orders/ \
  -H "Content-Type: application/json" \
  -d '{"invalid": "data"}'
```

### âœ… éªŒè¯æ­¥éª¤
- [ ] ç§é’¥å·²åŠ å¯†å­˜å‚¨ (ä¸æ˜¯æ˜æ–‡)
- [ ] æ— æ•ˆè¯·æ±‚è¿”å›é€‚å½“é”™è¯¯ï¼Œä¸å´©æºƒ
- [ ] æ—¥å¿—ä¸­æ— æ•æ„Ÿä¿¡æ¯æ³„éœ²
- [ ] æœåŠ¡ç¨³å®šè¿è¡Œ

**éªŒæ”¶æ ‡å‡†**: åŸºæœ¬å®‰å…¨æœºåˆ¶å·¥ä½œæ­£å¸¸ âœ…

---

## ğŸ“Š æœ€ç»ˆéªŒæ”¶æ£€æŸ¥

### æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶ âœ…
- [ ] **APIæœåŠ¡**: æ‰€æœ‰ç«¯ç‚¹æ­£å¸¸å“åº”
- [ ] **æ•°æ®åº“**: æ•°æ®æ­£ç¡®å­˜å‚¨å’ŒæŸ¥è¯¢  
- [ ] **é’±åŒ…ç®¡ç†**: ä¾›åº”å•†é’±åŒ…æ­£å¸¸å·¥ä½œ
- [ ] **ç”¨æˆ·ç³»ç»Ÿ**: å……å€¼å’Œä½™é¢ç®¡ç†æ­£å¸¸
- [ ] **è®¢å•å¤„ç†**: å®Œæ•´çš„è®¢å•ç”Ÿå‘½å‘¨æœŸ
- [ ] **Telegram Bot**: ç«¯åˆ°ç«¯ç”¨æˆ·ä½“éªŒè‰¯å¥½
- [ ] **TRONé›†æˆ**: çœŸå®åŒºå—é“¾äº¤äº’ (å¦‚æœç½‘ç»œå¯è¾¾)

### æ€§èƒ½å’Œç¨³å®šæ€§ âœ…  
- [ ] **å“åº”æ—¶é—´**: APIå¹³å‡å“åº” < 2ç§’
- [ ] **å¹¶å‘å¤„ç†**: æ”¯æŒå¤šä¸ªè®¢å•å¹¶è¡Œå¤„ç†
- [ ] **èµ„æºä½¿ç”¨**: å†…å­˜å’Œç£ç›˜ä½¿ç”¨åˆç†
- [ ] **é”™è¯¯å¤„ç†**: å¼‚å¸¸æƒ…å†µä¼˜é›…å¤„ç†

### ä¸šåŠ¡æµç¨‹ âœ…
- [ ] **ç”¨æˆ·æ³¨å†Œ**: æ–°ç”¨æˆ·å¯ä»¥æ­£å¸¸ä½¿ç”¨
- [ ] **å……å€¼æµç¨‹**: å……å€¼ç¡®è®¤å’Œä½™é¢æ›´æ–°
- [ ] **ä¸‹å•æµç¨‹**: å®Œæ•´çš„èƒ½é‡ç§Ÿèµæµç¨‹
- [ ] **è®¢å•è·Ÿè¸ª**: çŠ¶æ€æ›´æ–°å’Œé€šçŸ¥
- [ ] **é€€æ¬¾æœºåˆ¶**: å¤±è´¥è®¢å•è‡ªåŠ¨é€€æ¬¾

---

## ğŸš¨ ç´§æ€¥é—®é¢˜å¤„ç†

### å¦‚æœæµ‹è¯•å¤±è´¥

#### APIæœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥æ—¥å¿—
tail -f /var/log/syslog | grep python

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 8001

# é‡å¯æœåŠ¡
pkill -f "python3 main.py"
cd backend && python3 main.py
```

#### è®¢å•å¤„ç†å¤±è´¥
```bash
# æ£€æŸ¥ä¾›åº”å•†é’±åŒ…ä½™é¢
curl http://localhost:8001/api/supplier-wallets/

# æ‰‹åŠ¨å¤„ç†pendingè®¢å•
curl -X POST http://localhost:8001/api/supplier-wallets/process-orders

# æ£€æŸ¥TRONç½‘ç»œè¿é€šæ€§
python3 -c "from tronpy import Tron; print(Tron().get_latest_block_number())"
```

#### Botæ— å“åº”
```bash
# é‡å¯BotæœåŠ¡
pkill -f "main.py"
cd /root/trx-bot && python3 main.py

# æ£€æŸ¥Bot Token
grep TELEGRAM_BOT_TOKEN backend/.env
```

---

## âœ¨ æµ‹è¯•æˆåŠŸåçš„ä¸‹ä¸€æ­¥

### ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
1. **é…ç½®HTTPS** - ä½¿ç”¨Nginx + Let's Encrypt
2. **è®¾ç½®systemdæœåŠ¡** - è‡ªåŠ¨å¯åŠ¨å’Œé‡å¯  
3. **é…ç½®ç›‘æ§** - æ—¥å¿—ç›‘æ§å’ŒæŠ¥è­¦
4. **å¤‡ä»½ç­–ç•¥** - å®šæœŸæ•°æ®åº“å¤‡ä»½
5. **å®‰å…¨åŠ å›º** - é˜²ç«å¢™ã€æ›´æ–°å¯†é’¥

### ä¸šåŠ¡å‡†å¤‡
1. **èµ„é‡‘ç®¡ç†** - ä¾›åº”å•†é’±åŒ…å……å€¼ç­–ç•¥
2. **å®šä»·ç­–ç•¥** - æ ¹æ®å¸‚åœºè°ƒæ•´ä»·æ ¼
3. **å®¢æœå‡†å¤‡** - å¤„ç†ç”¨æˆ·é—®é¢˜å’ŒæŠ•è¯‰
4. **è¥é”€æ¨å¹¿** - ç”¨æˆ·è·å–å’Œç•™å­˜

### ç›‘æ§ç»´æŠ¤
1. **7x24ç›‘æ§** - æœåŠ¡å¯ç”¨æ€§ç›‘æ§
2. **æ€§èƒ½ç›‘æ§** - å“åº”æ—¶é—´å’Œèµ„æºä½¿ç”¨
3. **ä¸šåŠ¡ç›‘æ§** - è®¢å•é‡ã€æˆåŠŸç‡ã€æ”¶å…¥
4. **å®‰å…¨ç›‘æ§** - å¼‚å¸¸è®¿é—®å’Œæ”»å‡»æ£€æµ‹

---

## ğŸ“ æ”¯æŒè”ç³»

å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶** - æ£€æŸ¥è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. **å‚è€ƒæ•…éšœæ’æŸ¥æŒ‡å—** - `docs/æ­£å¼åœºæ™¯æµ‹è¯•æŒ‡å—.md`
3. **GitHub Issues** - æäº¤å…·ä½“çš„é—®é¢˜æè¿°
4. **æŠ€æœ¯æ–‡æ¡£** - æŸ¥é˜… `docs/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡æ¡£

---

**é¢„è®¡æ€»æµ‹è¯•æ—¶é—´**: 2-3å°æ—¶  
**å»ºè®®æµ‹è¯•äººæ•°**: 2äºº (ä¸€äººæ“ä½œï¼Œä¸€äººè®°å½•)  
**æœ€ä½³æµ‹è¯•æ—¶é—´**: å·¥ä½œæ—¥ç™½å¤©ï¼Œä¾¿äºå¤„ç†é—®é¢˜  

ğŸ¯ **æµ‹è¯•æˆåŠŸæ ‡å¿—**: èƒ½å¤Ÿé€šè¿‡Telegram BotæˆåŠŸè´­ä¹°Energyå¹¶åœ¨TRONç½‘ç»œä¸Šçœ‹åˆ°çœŸå®çš„å§”æ‰˜äº¤æ˜“ï¼